  <input type="text"
    value={{this.query}}
    class="border w-full py-2 px-3 pl-10"
    placeholder="Assign customer"
    disabled={{this.selectedCustomer}}
    onfocus={{action this.handleFocus}}
    oninput={{action this.handleInput value="target.value"}}>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute pin mx-2 my-1 icon-user w-6"><path class="primary" d="M12 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><path class="secondary" d="M21 20v-1a5 5 0 0 0-5-5H8a5 5 0 0 0-5 5v1c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2z"/></svg>
  {{#if this.selectedCustomer}}
    <div id="selection" class="absolute pin ml-10 px-2 my-1 py-1 bg-white flex justify-between">
      {{this.selectedCustomer.name}}
      <button
        class="-mt-1"
        onclick={{action deselectCustomer}}>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 icon-close-square"><rect width="18" height="18" x="3" y="3" class="primary" rx="2"></rect><path class="secondary" d="M13.41 12l2.83 2.83a1 1 0 0 1-1.41 1.41L12 13.41l-2.83 2.83a1 1 0 1 1-1.41-1.41L10.59 12 7.76 9.17a1 1 0 0 1 1.41-1.41L12 10.59l2.83-2.83a1 1 0 0 1 1.41 1.41L13.41 12z"></path></svg>
      </button>
    </div>
  {{/if}}
  {{#if (and this.focussed (not this.selectedCustomer))}}
    <ul class="list-reset bg-grey-darkest">
      {{#if this.searchCustomers.isRunning}}
        <div class="p-2 spinner"></div>
      {{else}}
        {{#each this.customers as |customer index|}}
          {{#if (has-block)}}
            {{yield customer}}
          {{else}}
            <li
              class="text-grey-lighter border-t border-grey p-2 hover:bg-black {{if (eq index this.selectedIndex) "bg-black selected"}}"
              onclick={{action this.selectCustomer customer}}
              role="button"
              >
              <div class="w-full">
                {{customer.name}} {{index}}
              </div>
              <div class="flex text-xs text-grey">
                <div class="w-1/2">
                  {{customer.email}}
                </div>
                <div class="w-1/2 text-right">
                  {{customer.uuid}}
                </div>
              </div>
            </li>
          {{/if}}
        {{else}}
          {{#if this.didSearch}}
            <li class="text-grey-lighter border-t border-grey p-2">No results for query</li>
          {{/if}}
        {{/each}}
        <li class="text-grey-lighter p-2 hover:bg-black border-t border-grey">Create a new customer</li>
      {{/if}}
    </ul>
  {{/if}}
